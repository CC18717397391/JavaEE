(function() {
  var time = {
    "artical": 0,
    "user": 0,
    "img": 0
  };
  var TIME_SPACE = 1000;

  $("#articalManager").click(function() {
    if (new Date().getTime() - time.artical < TIME_SPACE) {
      return;
    }
    time.artical = new Date().getTime();
    setTemplate(
      "/src/pc/views/manager/articalList.html",
      "#articalManager",
      initArticalList
    );
  });
  $("#articalManager").click();
  $("#userManager").click(function() {
    if (new Date().getTime() - time.user < TIME_SPACE) {
      return;
    }
    time.user = new Date().getTime();
    setTemplate("/src/pc/views/manager/user.html", "#userManager", initUser);
  });
  $("#imgManager").click(function() {
    if (new Date().getTime() - time.img < TIME_SPACE) {
      return;
    }
    time.img = new Date().getTime();
    setTemplate("/src/pc/views/manager/img.html", "#imgManager");
  });
  function setTemplate(url, id, callback) {
    $.ajax({
      "type": "get",
      "url": url,
      "success": function(response) {
        $(".right")
          .empty()
          .append(response);
        $(".left>li").removeClass("active");
        $(id).addClass("active");
        callback && callback();
      }
    });
  }

  var editor = null;
  function initArticalList() {}

  function initArtical() {
    if (editor) {
      editor.destroy();
      editor = null;
    }
    editor = UE.getEditor("editor");
  }

  function initUser() {
    $("#tempImg").click(function() {
      editor.getDialog("insertimage").open();
    });
  }
})();
