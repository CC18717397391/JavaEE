(function() {
  var username = "";
  var password = "";
  $("#submit").click(function() {
    username = $("#username").val();
    password = $("#password").val();
    if (check()) {
      submit();
    }
  });
  $("#username").focus(function() {
    $(".error").hide();
  });
  $("#password").focus(function() {
    $(".error").hide();
  });

  function check() {
    if (!username || !password) {
      $(".error")
        .show()
        .text("请输入用户名和密码");
      return false;
    }
    if (
      !/^\w{3,10}$/.test(username) ||
      !/^[A-Za-z]{1}([A-Za-z0-9]|[._*]){5,19}$/.test(password)
    ) {
      $(".error")
        .show()
        .text("用户名或者密码格式输入有误");
      return false;
    }
    return true;
  }

  function submit() {
    window.location.href = "/src/pc/views/manager/manager.html";
    // $.ajax({
    //   "type": "post",
    //   "url": "login.do",
    //   "data": {
    //     "username": username,
    //     "password": password
    //   },
    //   "dataType": "json",
    //   "success": function(response) {
    //     if ("FAILED" === response.state) {
    //       $(".error")
    //         .show()
    //         .text(response.responseText);
    //     } else {
    //       window.location.href = "/src/pc/views/manager.html";
    //     }
    //   },
    //   "error": function(response) {
    //     $(".error")
    //       .show()
    //       .text(response.responseText);
    //   }
    // });
  }
})();
