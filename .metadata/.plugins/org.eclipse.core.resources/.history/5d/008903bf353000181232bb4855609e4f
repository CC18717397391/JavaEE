package com.yizhan.interceptor;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.web.servlet.HandlerInterceptor;
import org.springframework.web.servlet.ModelAndView;

import com.yizhan.bean.User;

public class LoginInterceptor implements HandlerInterceptor {

	@Override
	public void afterCompletion(HttpServletRequest arg0, HttpServletResponse arg1, Object arg2, Exception arg3)
			throws Exception {
		// TODO Auto-generated method stub

	}

	@Override
	public void postHandle(HttpServletRequest arg0, HttpServletResponse arg1, Object arg2, ModelAndView arg3)
			throws Exception {
		// TODO Auto-generated method stub

	}

	@Override
	public boolean preHandle(HttpServletRequest req, HttpServletResponse res, Object arg2) throws Exception {
		// GET请求不拦截
//		String method = req.getMethod();
//		System.out.println(method);
//		if(method.equalsIgnoreCase("get")){
//			return true;
//		}
//		User user = (User) req.getSession().getAttribute("user");
//		if (user != null) {
//			// 有登陆信息，允许继续往下访问
//			return true;
//		} else {
//			// 没有登录过，不允许继续访问
//			System.out.println("session失效，开始重定向");
//			res.sendRedirect("/iyizhan/login.html");
//			return false;// 终止后续执行
//		}
		return true;

	}

}
